import{r as u,y as x,j as e,u as Ie,z as Pe,A as we}from"./components-DKwNRbqV.js";import{u as Ee,c as Ae,v as Q,d as j,I as p,T as s,C as D,b as h,e as B,f as V,S as Be,B as C,P as ie,a as E}from"./Page-P-8IetFp.js";import{C as Me,S as L,T as X,A as ee,a as te,B as A,D as ne,b as Re,c as De,d as _,e as Z,M as ae}from"./SearchIcon.svg-sR3tMc0V.js";import{j as Ne}from"./context-BRhAIWmx.js";var R={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function Fe({progress:i=0,size:n="medium",tone:l="highlight",animated:r=!0,ariaLabelledBy:f}){const g=Ne(),t=Ee(),d=u.useRef(null),I=Ae(R.ProgressBar,n&&R[Q("size",n)],l&&R[Q("tone",l)]);t.translate(i<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:i});const k=Te(i),b=r?g.motion["motion-duration-500"]:g.motion["motion-duration-0"];return x.createElement("div",{className:I},x.createElement("progress",{"aria-labelledby":f,className:R.Progress,value:k,max:"100"}),x.createElement(Me,{in:!0,appear:!0,timeout:parseInt(b,10),nodeRef:d,classNames:{appearActive:R.IndicatorAppearActive,appearDone:R.IndicatorAppearDone}},x.createElement("div",{ref:d,className:R.Indicator,style:{"--pc-progress-bar-duration":b,"--pc-progress-bar-percent":k/100}},x.createElement("span",{className:R.Label},k,"%"))))}function Te(i,n){let l;return i<0?l=0:i>100?l=100:l=i,l}var re=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{fillRule:"evenodd",d:"M5.72 8.47a.75.75 0 0 1 1.06 0l3.47 3.47 3.47-3.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06Z"}))};re.displayName="ChevronDownIcon";var se=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{fillRule:"evenodd",d:"M7.72 14.53a.75.75 0 0 1 0-1.06l3.47-3.47-3.47-3.47a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0Z"}))};se.displayName="ChevronRightIcon";var le=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{d:"M8 12.5a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-4Z"}),x.createElement("path",{fillRule:"evenodd",d:"M6.75 2.5a2.75 2.75 0 0 0-2.75 2.75v9.5a2.75 2.75 0 0 0 2.75 2.75h6.5a2.75 2.75 0 0 0 2.75-2.75v-6a.75.75 0 0 0-.22-.53l-5.5-5.5a.75.75 0 0 0-.53-.22h-3Zm-1.25 2.75c0-.69.56-1.25 1.25-1.25h2.25v3.75c0 .966.784 1.75 1.75 1.75h3.75v5.25c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-9.5Zm7.94 2.75-2.94-2.94v2.69c0 .138.112.25.25.25h2.69Z"}))};le.displayName="FileIcon";var oe=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{fillRule:"evenodd",d:"M3 10a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-5.5a5.497 5.497 0 0 0-4.737 2.703l2 1.999c.472.472.737 1.113.737 1.78v.518a.5.5 0 0 0 .5.5 2 2 0 0 1 2 2v1.478a5.504 5.504 0 0 0 4.52-3.228h-1.02a.75.75 0 0 1-.75-.75v-.5a.75.75 0 0 0-.75-.75h-2.5a1.755 1.755 0 0 1-1.07-3.144l.463-.356a.393.393 0 0 0 .152-.312v-.04c0-.885.62-1.624 1.449-1.808a5.531 5.531 0 0 0-.994-.09Zm2.875.81a1.85 1.85 0 0 1-1.477.735.352.352 0 0 0-.353.353v.04c0 .587-.271 1.14-.736 1.499l-.462.356a.256.256 0 0 0 .153.457h2.5a2.25 2.25 0 0 1 2.236 2h.713a5.497 5.497 0 0 0-2.574-5.44Zm-8.375 4.69c0-.443.052-.875.152-1.288l1.55 1.55c.19.191.298.45.298.72v.518a2 2 0 0 0 2 2 .5.5 0 0 1 .5.5v1.41a5.502 5.502 0 0 1-4.5-5.41Z"}))};oe.displayName="GlobeIcon";var T=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{d:"M5.702 4.253a.625.625 0 0 1 1.096 0l.196.358c.207.378.517.688.895.895l.358.196a.625.625 0 0 1 0 1.097l-.358.196a2.25 2.25 0 0 0-.895.894l-.196.359a.625.625 0 0 1-1.096 0l-.196-.359a2.25 2.25 0 0 0-.895-.894l-.358-.196a.625.625 0 0 1 0-1.097l.358-.196a2.25 2.25 0 0 0 .895-.895l.196-.358Z"}),x.createElement("path",{fillRule:"evenodd",d:"M12.948 7.89c-.18-1.167-1.852-1.19-2.064-.029l-.03.164a3.756 3.756 0 0 1-3.088 3.031c-1.15.189-1.173 1.833-.03 2.054l.105.02a3.824 3.824 0 0 1 3.029 3.029l.032.165c.233 1.208 1.963 1.208 2.196 0l.025-.129a3.836 3.836 0 0 1 3.077-3.045c1.184-.216 1.12-1.928-.071-2.107a3.789 3.789 0 0 1-3.18-3.154Zm-.944 6.887a5.34 5.34 0 0 1 2.542-2.647 5.305 5.305 0 0 1-2.628-2.548 5.262 5.262 0 0 1-2.488 2.508 5.329 5.329 0 0 1 2.574 2.687Z"}))};T.displayName="MagicIcon";var J=function(n){return x.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),x.createElement("path",{d:"M6.55 7.25a.7.7 0 0 1 .7-.7h5.5a.7.7 0 0 1 0 1.4h-5.5a.7.7 0 0 1-.7-.7Z"}),x.createElement("path",{d:"M7 9.05a.7.7 0 0 0 0 1.4h2.25a.7.7 0 1 0 0-1.4h-2.25Z"}),x.createElement("path",{fillRule:"evenodd",d:"M3.5 6.25a2.75 2.75 0 0 1 2.75-2.75h7.5a2.75 2.75 0 0 1 2.75 2.75v5.5a.75.75 0 0 1-.22.53l-4 4a.75.75 0 0 1-.53.22h-5.5a2.75 2.75 0 0 1-2.75-2.75v-7.5Zm2.75-1.25c-.69 0-1.25.56-1.25 1.25v7.5c0 .69.56 1.25 1.25 1.25h4.75v-2.25c0-.966.784-1.75 1.75-1.75h2.25v-4.75c0-.69-.56-1.25-1.25-1.25h-7.5Zm7.69 7.5h-1.19a.25.25 0 0 0-.25.25v1.19l1.44-1.44Z"}))};J.displayName="NoteIcon";function ze({current:i,steps:n}){return e.jsx(j,{paddingBlock:"400",children:e.jsx(p,{gap:"300",align:"center",children:n.map((l,r)=>{const f=r+1,g=i===f,t=i>f,d=i<f;return e.jsxs(p,{gap:"200",align:"center",blockAlign:"center",children:[e.jsx(j,{background:g?"bg-fill-emphasis":t?"bg-fill-success":"bg-fill-tertiary",padding:"100",borderRadius:"full",width:"32px",height:"32px",minHeight:"32px",minWidth:"32px",position:"relative",children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",width:"100%",height:"100%",color:g||t?"#fff":"#6b7280",fontSize:"14px",fontWeight:"600"},children:t?e.jsx(L,{}):f})}),e.jsxs(j,{children:[e.jsx(s,{as:"span",variant:g?"bodyMd":"bodySm",fontWeight:g?"semibold":"regular",tone:d?"subdued":void 0,children:l.title}),l.description&&g&&e.jsx(j,{paddingBlockStart:"100",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:l.description})})]}),r<n.length-1&&e.jsx(j,{background:i>f?"bg-fill-success":"bg-fill-tertiary",width:"24px",height:"2px",borderRadius:"base"})]},r)})})})}function O({step:i,title:n,description:l,state:r,children:f,onActivate:g,disabled:t=!1}){const[d,I]=u.useState(r==="active");u.useEffect(()=>{I(r==="active")},[r]);const k=()=>{switch(r){case"active":return"bg-fill-emphasis-hover";case"complete":return"bg-fill-success-secondary";default:return}},b=r!=="inactive"&&!t,m=()=>{b&&((r==="complete"||r==="active")&&I(!d),r==="inactive"&&g&&g())};return e.jsx(D,{background:k(),padding:d?"500":"400",children:e.jsxs(h,{gap:"300",children:[e.jsx("button",{onClick:m,disabled:!b,style:{border:"none",background:"none",padding:0,cursor:b?"pointer":"default",textAlign:"left",width:"100%"},children:e.jsxs(p,{align:"space-between",blockAlign:"center",children:[e.jsxs(p,{gap:"300",align:"start",blockAlign:"center",children:[e.jsx(j,{background:r==="active"?"bg-fill-emphasis":r==="complete"?"bg-fill-success":"bg-fill-tertiary",padding:"200",borderRadius:"full",minWidth:"32px",minHeight:"32px",children:e.jsx("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",color:r==="inactive"?"#6b7280":"#fff",fontSize:"14px",fontWeight:"600"},children:r==="complete"?e.jsx(B,{source:L}):i})}),e.jsxs(h,{gap:"100",children:[e.jsx(s,{as:"h3",variant:r==="active"?"headingSm":"bodyMd",fontWeight:r==="active"?"semibold":"medium",tone:r==="inactive"?"subdued":void 0,children:n}),l&&e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:l})]})]}),b&&e.jsx(B,{source:d?re:se,tone:r==="inactive"?"subdued":void 0})]})}),d&&e.jsx(j,{paddingBlockStart:"300",style:{borderTop:"1px solid var(--p-color-border-secondary)"},children:f})]})})}function U({icon:i,title:n,description:l,active:r,onClick:f,supportedFormats:g,supportedSites:t,gradient:d}){return e.jsx("button",{onClick:f,style:{border:"none",background:"none",padding:0,cursor:"pointer",width:"100%"},children:e.jsx(D,{background:r?"bg-fill-emphasis-hover":void 0,padding:"400",children:e.jsxs(h,{gap:"300",children:[e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(j,{background:r?"bg-fill-emphasis":"bg-fill-tertiary",padding:"200",borderRadius:"base",children:e.jsx("div",{style:{color:r?"#fff":"#6b7280",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(B,{source:i})})}),e.jsxs(h,{gap:"100",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",alignment:"start",children:n}),r&&e.jsx(V,{tone:"info",size:"small",children:"Active"})]})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"start",children:l}),(g||t)&&e.jsx(j,{paddingBlockStart:"200",children:e.jsxs(s,{as:"p",variant:"captionMd",tone:"subdued",alignment:"start",children:[g&&`Supports: ${g.join(", ")}`,t&&`Works with: ${t.join(", ")}`]})})]})})})}function We({isActive:i,stages:n,insights:l=[]}){const[r,f]=u.useState(0),[g,t]=u.useState(0),[d,I]=u.useState(0);if(u.useEffect(()=>{i&&(f(0),t(0),I(0))},[i]),u.useEffect(()=>{if(!i)return;const m=n.reduce((P,N)=>P+N.duration,0);let v=0;const F=setInterval(()=>{v+=100;const P=Math.min(v/m*100,100);t(P);let N=0;for(let S=0;S<n.length;S++)if(N+=n[S].duration,v<=N){f(S);break}l.length>0&&I(Math.floor(v/2e3)%l.length),v>=m&&clearInterval(F)},100);return()=>clearInterval(F)},[i,n,l]),!i)return null;const k=n[r],b=l[d];return e.jsx(j,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsxs(h,{gap:"300",children:[e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(j,{background:"bg-fill-emphasis",padding:"200",borderRadius:"full",children:e.jsx("div",{style:{color:"#fff",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(B,{source:T})})}),e.jsxs(h,{gap:"100",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"AI is extracting your content..."}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"This usually takes 10-15 seconds"})]})]}),e.jsx(Fe,{progress:g,size:"small"}),e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(Be,{size:"small"}),e.jsx(s,{as:"p",variant:"bodySm",children:k?.name||"Processing..."})]}),b&&e.jsx(j,{padding:"300",background:"bg-fill-info-secondary",borderRadius:"base",borderWidth:"025",borderColor:"border-info",children:e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(B,{source:J,tone:"info"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"info",children:b})]})}),e.jsx(h,{gap:"200",children:n.map((m,v)=>e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:v<=r?"var(--p-color-bg-fill-success)":"var(--p-color-bg-fill-tertiary)"}}),e.jsx(s,{as:"p",variant:"captionMd",tone:v<=r?void 0:"subdued",children:m.name})]},v))})]})})}function Ze({products:i,selectedProduct:n,onSelect:l,placeholder:r="Search by product name, SKU, or handle...",loading:f=!1}){const[g,t]=u.useState(n?.title||""),d=i.map(m=>({value:m.id,label:m.title,media:m.featuredImage?.url?e.jsx(X,{source:m.featuredImage.url,alt:m.featuredImage.altText||m.title,size:"small"}):void 0})),I=u.useCallback(m=>{const v=i.find(F=>F.id===m[0]);v&&(l(v),t(v.title))},[i,l]),k=u.useCallback(m=>{t(m)},[]),b=()=>e.jsx(j,{padding:"400",children:e.jsxs(h,{gap:"300",inlineAlign:"center",children:[e.jsx(B,{source:te,tone:"subdued"}),e.jsx(s,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"No products found"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"Try adjusting your search or import products first"}),e.jsx(C,{variant:"plain",size:"micro",children:"Import Products"})]})});return e.jsxs(h,{gap:"300",children:[e.jsx(ee,{options:d,selected:n?[n.id]:[],onSelect:I,loading:f,emptyState:e.jsx(b,{}),listTitle:"Products",textField:e.jsx(ee.TextField,{onChange:k,label:"Select a product",value:g,prefix:e.jsx(B,{source:te}),placeholder:r,autoComplete:"off"})}),n&&e.jsx(D,{padding:"400",children:e.jsxs(p,{gap:"400",align:"space-between",blockAlign:"center",children:[e.jsxs(p,{gap:"300",align:"start",blockAlign:"center",children:[n.featuredImage?.url&&e.jsx(X,{source:n.featuredImage.url,alt:n.title,size:"medium"}),e.jsxs(h,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:n.title}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["Handle: /",n.handle]}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["ID: ",n.id.replace("gid://shopify/Product/","")]})]})]}),e.jsxs(p,{gap:"200",align:"end",blockAlign:"center",children:[e.jsx(V,{tone:"success",icon:L,children:"Selected"}),e.jsx(C,{variant:"plain",size:"micro",onClick:()=>{l(null),t("")},children:"Change"})]})]})}),!n&&i.length===0&&e.jsx(A,{tone:"info",children:e.jsxs(h,{gap:"200",children:[e.jsxs(s,{as:"p",variant:"bodySm",children:[e.jsx("strong",{children:"No products found."})," Make sure you have products in your Shopify store."]}),e.jsx(s,{as:"p",variant:"bodySm",children:"You can import products from your admin dashboard or create them manually."})]})}),g&&!f&&i.length>0&&d.length===0&&e.jsx(A,{tone:"warning",children:e.jsxs(s,{as:"p",variant:"bodySm",children:[e.jsxs("strong",{children:['No matches for "',g,'".']})," Try searching by product name, SKU, or handle."]})})]})}function Ue(){const{products:i}=Ie(),n=Pe();u.useRef(null);const[l,r]=u.useState(null),[f,g]=u.useState(""),[t,d]=u.useState(null),[I,k]=u.useState(!1),[b,m]=u.useState("text"),[v,F]=u.useState(""),[P,N]=u.useState(null),[S,ce]=u.useState(null),[W,G]=u.useState(1),z=n.state==="submitting"&&(n.formData?.get("intent")==="extract"||n.formData?.get("intent")==="extract-pdf"||n.formData?.get("intent")==="extract-url"),de=n.state==="submitting"&&n.formData?.get("intent")==="save",M=n.data,H=a=>a<W?"complete":a===W?"active":"inactive",ue=[{title:"Select Product",description:"Choose which product to enhance"},{title:"Import Specs",description:"Extract content with AI"},{title:"Review & Save",description:"Edit and save to metafields"}];u.useEffect(()=>{M?.extracted&&(d(M.extracted),M.source&&ce(M.source),G(3))},[M]),u.useEffect(()=>{l&&W===1&&G(2)},[l]);const he=u.useCallback((a,o)=>{o.length>0&&N(o[0])},[]),ge=()=>{if(!P)return;const a=new FormData;a.append("intent","extract-pdf"),a.append("pdf",P),n.submit(a,{method:"post",encType:"multipart/form-data"})},pe=()=>{if(!v.trim())return;const a=new FormData;a.append("intent","extract-url"),a.append("url",v.trim()),n.submit(a,{method:"post"})},fe=(a,o)=>{if(!t)return;const c=[...t.highlights];c[a]=o,d({...t,highlights:c})},me=a=>{t&&d({...t,highlights:t.highlights.filter((o,c)=>c!==a)})},xe=()=>{t&&d({...t,highlights:[...t.highlights,""]})},$=(a,o,c)=>{if(!t)return;const y=[...t.featured];y[a]={...y[a],[o]:c},d({...t,featured:y})},be=a=>{t&&d({...t,featured:t.featured.filter((o,c)=>c!==a)})},ve=()=>{t&&d({...t,featured:[...t.featured,{title:"",value:""}]})},K=(a,o,c)=>{if(!t)return;const y=[...t.included];y[a]={...y[a],[o]:c},d({...t,included:y})},je=a=>{t&&d({...t,included:t.included.filter((o,c)=>c!==a)})},Se=()=>{t&&d({...t,included:[...t.included,{title:"",link:""}]})},Y=(a,o,c,y)=>{if(!t)return;const w=[...t.specs];w[a]={...w[a],lines:w[a].lines.map((q,ke)=>ke===o?{...q,[c]:y}:q)},d({...t,specs:w})},ye=(a,o)=>{if(!t)return;const c=[...t.specs];c[a]={...c[a],lines:c[a].lines.filter((y,w)=>w!==o)},d({...t,specs:c})},Ce=()=>{if(!l||!t)return;const a=new FormData;a.append("intent","save"),a.append("productId",l.id),a.append("content",JSON.stringify(t)),n.submit(a,{method:"post"})};return e.jsx(ie,{title:"Product Bridge",subtitle:"AI-powered product content automation",primaryAction:e.jsx(p,{gap:"200",children:e.jsx(V,{tone:"info",icon:T,children:"AI-Powered"})}),children:e.jsxs(h,{gap:"500",children:[e.jsx(ze,{current:W,steps:ue}),M?.success&&e.jsx(A,{title:"Metafields saved successfully!",tone:"success",onDismiss:()=>{}}),M?.error&&e.jsx(A,{title:"Error",tone:"critical",children:M.error}),e.jsx(O,{step:1,title:"Select Product",description:"Choose which product to enhance with AI-extracted content",state:H(1),children:e.jsx(Ze,{products:i,selectedProduct:l,onSelect:r})}),e.jsx(O,{step:2,title:"Import Product Specs",description:"Choose how to provide product information",state:H(2),disabled:!l,children:e.jsxs(h,{gap:"400",children:[e.jsxs(p,{gap:"300",children:[e.jsx(U,{icon:J,title:"Paste Text",description:"Copy specs from manufacturer websites",active:b==="text",onClick:()=>m("text")}),e.jsx(U,{icon:le,title:"Upload PDF",description:"Extract from brochures and spec sheets",active:b==="pdf",onClick:()=>m("pdf"),supportedFormats:[".pdf","up to 20MB"]}),e.jsx(U,{icon:oe,title:"Scrape URL",description:"Auto-extract from manufacturer pages",active:b==="url",onClick:()=>m("url"),supportedSites:["Canon","Sony","Nikon","+8 more"]})]}),e.jsxs(j,{paddingBlockStart:"300",children:[b==="text"&&e.jsxs(h,{gap:"400",children:[e.jsx(E,{label:"Raw specs from manufacturer",multiline:8,value:f,onChange:g,placeholder:"Paste the full specification sheet from the manufacturer website...",autoComplete:"off"}),e.jsxs(n.Form,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"extract"}),e.jsx("input",{type:"hidden",name:"text",value:f}),e.jsx(C,{variant:"primary",submit:!0,loading:z&&n.formData?.get("intent")==="extract",disabled:!f.trim(),icon:T,children:"Extract Content with AI"})]})]}),b==="pdf"&&e.jsxs(h,{gap:"400",children:[e.jsx(ne,{onDrop:he,accept:".pdf,application/pdf",type:"file",allowMultiple:!1,children:P?e.jsxs(h,{gap:"200",inlineAlign:"center",children:[e.jsx(B,{source:Re,tone:"success"}),e.jsx(s,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:P.name}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:[(P.size/1024/1024).toFixed(2)," MB"]}),e.jsx(C,{variant:"plain",onClick:()=>N(null),children:"Remove"})]}):e.jsx(ne.FileUpload,{actionTitle:"Upload PDF",actionHint:"or drag and drop"})}),e.jsx(C,{variant:"primary",onClick:ge,loading:z&&n.formData?.get("intent")==="extract-pdf",disabled:!P,icon:T,children:"Extract Content from PDF"}),e.jsx(A,{tone:"info",children:e.jsx(s,{as:"p",variant:"bodySm",children:"Upload manufacturer spec sheets or product brochures. Works best with text-based PDFs."})})]}),b==="url"&&e.jsxs(h,{gap:"400",children:[e.jsx(E,{label:"Manufacturer product page URL",value:v,onChange:F,placeholder:"https://www.usa.canon.com/shop/p/eos-r5-mark-ii",autoComplete:"off",prefix:e.jsx(B,{source:De})}),e.jsx(C,{variant:"primary",onClick:pe,loading:z&&n.formData?.get("intent")==="extract-url",disabled:!v.trim(),icon:T,children:"Scrape & Extract Content"}),e.jsx(A,{tone:"info",children:e.jsx(s,{as:"p",variant:"bodySm",children:"Supported manufacturers: Canon, Sony, Nikon, Fujifilm, Panasonic, Leica, and more."})})]})]}),z&&e.jsx(We,{isActive:z,stages:[{name:"Reading content",duration:2e3},{name:"AI analysis",duration:3e3},{name:"Structuring data",duration:1e3}],insights:["Analyzing content structure...","Identifying key specifications...","Organizing product highlights...","Extracting included items..."]}),S&&t&&e.jsx(A,{tone:"success",children:e.jsxs(h,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",fontWeight:"semibold",children:"âœ¨ Content extracted successfully!"}),S.type==="pdf"&&e.jsxs(s,{as:"p",variant:"bodySm",children:["Source: ",S.filename," (",S.pages," pages)"]}),S.type==="url"&&e.jsxs(s,{as:"p",variant:"bodySm",children:["Source: ",S.title||S.url,S.manufacturer&&` (${S.manufacturer})`]})]})})]})}),e.jsx(O,{step:3,title:"Review & Edit Content",description:"Fine-tune the AI-extracted content before saving",state:H(3),disabled:!t,children:t&&e.jsxs(h,{gap:"500",children:[e.jsxs(p,{align:"space-between",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Extracted Content"}),e.jsxs(p,{gap:"200",children:[e.jsx(C,{variant:"tertiary",onClick:()=>k(!0),children:"Preview JSON"}),e.jsx(C,{variant:"primary",onClick:Ce,loading:de,disabled:!l,icon:L,children:"Save to Product Metafields"})]})]}),e.jsx(D,{children:e.jsxs(h,{gap:"300",children:[e.jsxs(p,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Product Highlights (",t.highlights.length,")"]}),e.jsx(C,{variant:"plain",onClick:xe,icon:_,children:"Add Highlight"})]}),t.highlights.length===0?e.jsx(j,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:'No highlights extracted. Click "Add Highlight" to create one manually.'})}):t.highlights.map((a,o)=>e.jsxs(p,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{flex:1},children:e.jsx(E,{label:"",labelHidden:!0,value:a,onChange:c=>fe(o,c),autoComplete:"off"})}),e.jsx(C,{variant:"plain",tone:"critical",onClick:()=>me(o),icon:Z,accessibilityLabel:"Remove highlight"})]},o))]})}),e.jsx(D,{children:e.jsxs(h,{gap:"300",children:[e.jsxs(p,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Featured Specifications (",t.featured.length,")"]}),e.jsx(C,{variant:"plain",onClick:ve,icon:_,children:"Add Spec"})]}),t.featured.length===0?e.jsx(j,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No featured specs extracted. These are key specs shown prominently."})}):t.featured.map((a,o)=>e.jsxs(p,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:1},children:e.jsx(E,{label:"Specification",value:a.title,onChange:c=>$(o,"title",c),autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(E,{label:"Value",value:a.value,onChange:c=>$(o,"value",c),autoComplete:"off"})}),e.jsx(C,{variant:"plain",tone:"critical",onClick:()=>be(o),icon:Z,accessibilityLabel:"Remove featured spec"})]},o))]})}),e.jsx(D,{children:e.jsxs(h,{gap:"300",children:[e.jsxs(p,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["What's Included (",t.included.length,")"]}),e.jsx(C,{variant:"plain",onClick:Se,icon:_,children:"Add Item"})]}),t.included.length===0?e.jsx(j,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No included items found. List accessories and components included with the product."})}):t.included.map((a,o)=>e.jsxs(p,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:2},children:e.jsx(E,{label:"Item",value:a.title,onChange:c=>K(o,"title",c),autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(E,{label:"Link (optional)",value:a.link,onChange:c=>K(o,"link",c),autoComplete:"off",placeholder:"/products/..."})}),e.jsx(C,{variant:"plain",tone:"critical",onClick:()=>je(o),icon:Z,accessibilityLabel:"Remove included item"})]},o))]})}),e.jsx(D,{children:e.jsxs(h,{gap:"400",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Detailed Specifications (",t.specs.length," groups)"]}),t.specs.length===0?e.jsx(j,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No specifications extracted. The detailed tech specs will appear here."})}):t.specs.map((a,o)=>e.jsx(D,{background:"bg-surface-secondary",children:e.jsxs(h,{gap:"300",children:[e.jsx(s,{as:"h5",variant:"bodyMd",fontWeight:"semibold",children:a.heading}),a.lines.map((c,y)=>e.jsxs(p,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:1},children:e.jsx(E,{label:"Specification",labelHidden:!0,value:c.title,onChange:w=>Y(o,y,"title",w),autoComplete:"off",size:"slim"})}),e.jsx("div",{style:{flex:2},children:e.jsx(E,{label:"Value",labelHidden:!0,value:c.text,onChange:w=>Y(o,y,"text",w),autoComplete:"off",size:"slim"})}),e.jsx(C,{variant:"plain",tone:"critical",onClick:()=>ye(o,y),icon:Z,accessibilityLabel:"Remove specification"})]},y))]})},o))]})}),!l&&e.jsx(A,{tone:"warning",children:"Please select a product in Step 1 before saving."})]})}),e.jsx(ae,{open:I,onClose:()=>k(!1),title:"JSON Preview",children:e.jsx(ae.Section,{children:e.jsx("pre",{style:{fontSize:"12px",overflow:"auto",maxHeight:"500px",background:"#f6f6f7",padding:"16px",borderRadius:"8px",border:"1px solid #e1e3e5"},children:JSON.stringify(t,null,2)})})})]})})}function Ve(){const i=we(),n=()=>i&&typeof i=="object"&&"message"in i&&"suggestion"in i?i:{message:"Something went wrong.",suggestion:"Try refreshing the page or re-opening the app."},{message:l,suggestion:r}=n();return e.jsx(ie,{title:"Product Bridge",children:e.jsx(A,{tone:"critical",title:l,children:r})})}export{Ve as ErrorBoundary,Ue as default};
