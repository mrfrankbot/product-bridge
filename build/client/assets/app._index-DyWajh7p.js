import{r as h,y as m,j as e,u as Ie,z as we,A as Pe}from"./components-DKwNRbqV.js";import{u as Me,c as Ee,v as q,d as C,I as g,T as s,C as R,b as u,e as N,f as U,S as Ae,B as y,P as ae,a as M}from"./Page-P-8IetFp.js";import{j as Be}from"./context-BRhAIWmx.js";import{C as Re,T as Q,A as X,S as ee,a as re,B as E,D as te,b as De,c as Ne,d as H,e as L,M as ne}from"./SearchIcon.svg-Pl61KX6Q.js";var B={ProgressBar:"Polaris-ProgressBar",sizeSmall:"Polaris-ProgressBar--sizeSmall",sizeMedium:"Polaris-ProgressBar--sizeMedium",sizeLarge:"Polaris-ProgressBar--sizeLarge",toneHighlight:"Polaris-ProgressBar--toneHighlight",tonePrimary:"Polaris-ProgressBar--tonePrimary",toneSuccess:"Polaris-ProgressBar--toneSuccess",toneCritical:"Polaris-ProgressBar--toneCritical",Indicator:"Polaris-ProgressBar__Indicator",IndicatorAppearActive:"Polaris-ProgressBar__IndicatorAppearActive",IndicatorAppearDone:"Polaris-ProgressBar__IndicatorAppearDone",Progress:"Polaris-ProgressBar__Progress",Label:"Polaris-ProgressBar__Label"};function Fe({progress:r=0,size:n="medium",tone:l="highlight",animated:i=!0,ariaLabelledBy:x}){const p=Be(),t=Me(),d=h.useRef(null),I=Ee(B.ProgressBar,n&&B[q("size",n)],l&&B[q("tone",l)]);t.translate(r<0?"Polaris.ProgressBar.negativeWarningMessage":"Polaris.ProgressBar.exceedWarningMessage",{progress:r});const k=Ze(r),v=i?p.motion["motion-duration-500"]:p.motion["motion-duration-0"];return m.createElement("div",{className:I},m.createElement("progress",{"aria-labelledby":x,className:B.Progress,value:k,max:"100"}),m.createElement(Re,{in:!0,appear:!0,timeout:parseInt(v,10),nodeRef:d,classNames:{appearActive:B.IndicatorAppearActive,appearDone:B.IndicatorAppearDone}},m.createElement("div",{ref:d,className:B.Indicator,style:{"--pc-progress-bar-duration":v,"--pc-progress-bar-percent":k/100}},m.createElement("span",{className:B.Label},k,"%"))))}function Ze(r,n){let l;return r<0?l=0:r>100?l=100:l=r,l}var ie=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{fillRule:"evenodd",d:"M5.72 8.47a.75.75 0 0 1 1.06 0l3.47 3.47 3.47-3.47a.75.75 0 1 1 1.06 1.06l-4 4a.75.75 0 0 1-1.06 0l-4-4a.75.75 0 0 1 0-1.06Z"}))};ie.displayName="ChevronDownIcon";var se=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{fillRule:"evenodd",d:"M7.72 14.53a.75.75 0 0 1 0-1.06l3.47-3.47-3.47-3.47a.75.75 0 0 1 1.06-1.06l4 4a.75.75 0 0 1 0 1.06l-4 4a.75.75 0 0 1-1.06 0Z"}))};se.displayName="ChevronRightIcon";var le=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{d:"M8 12.5a1 1 0 1 0 0 2h4a1 1 0 1 0 0-2h-4Z"}),m.createElement("path",{fillRule:"evenodd",d:"M6.75 2.5a2.75 2.75 0 0 0-2.75 2.75v9.5a2.75 2.75 0 0 0 2.75 2.75h6.5a2.75 2.75 0 0 0 2.75-2.75v-6a.75.75 0 0 0-.22-.53l-5.5-5.5a.75.75 0 0 0-.53-.22h-3Zm-1.25 2.75c0-.69.56-1.25 1.25-1.25h2.25v3.75c0 .966.784 1.75 1.75 1.75h3.75v5.25c0 .69-.56 1.25-1.25 1.25h-6.5c-.69 0-1.25-.56-1.25-1.25v-9.5Zm7.94 2.75-2.94-2.94v2.69c0 .138.112.25.25.25h2.69Z"}))};le.displayName="FileIcon";var oe=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{fillRule:"evenodd",d:"M3 10a7 7 0 1 1 14 0 7 7 0 0 1-14 0Zm7-5.5a5.497 5.497 0 0 0-4.737 2.703l2 1.999c.472.472.737 1.113.737 1.78v.518a.5.5 0 0 0 .5.5 2 2 0 0 1 2 2v1.478a5.504 5.504 0 0 0 4.52-3.228h-1.02a.75.75 0 0 1-.75-.75v-.5a.75.75 0 0 0-.75-.75h-2.5a1.755 1.755 0 0 1-1.07-3.144l.463-.356a.393.393 0 0 0 .152-.312v-.04c0-.885.62-1.624 1.449-1.808a5.531 5.531 0 0 0-.994-.09Zm2.875.81a1.85 1.85 0 0 1-1.477.735.352.352 0 0 0-.353.353v.04c0 .587-.271 1.14-.736 1.499l-.462.356a.256.256 0 0 0 .153.457h2.5a2.25 2.25 0 0 1 2.236 2h.713a5.497 5.497 0 0 0-2.574-5.44Zm-8.375 4.69c0-.443.052-.875.152-1.288l1.55 1.55c.19.191.298.45.298.72v.518a2 2 0 0 0 2 2 .5.5 0 0 1 .5.5v1.41a5.502 5.502 0 0 1-4.5-5.41Z"}))};oe.displayName="GlobeIcon";var T=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{d:"M5.702 4.253a.625.625 0 0 1 1.096 0l.196.358c.207.378.517.688.895.895l.358.196a.625.625 0 0 1 0 1.097l-.358.196a2.25 2.25 0 0 0-.895.894l-.196.359a.625.625 0 0 1-1.096 0l-.196-.359a2.25 2.25 0 0 0-.895-.894l-.358-.196a.625.625 0 0 1 0-1.097l.358-.196a2.25 2.25 0 0 0 .895-.895l.196-.358Z"}),m.createElement("path",{fillRule:"evenodd",d:"M12.948 7.89c-.18-1.167-1.852-1.19-2.064-.029l-.03.164a3.756 3.756 0 0 1-3.088 3.031c-1.15.189-1.173 1.833-.03 2.054l.105.02a3.824 3.824 0 0 1 3.029 3.029l.032.165c.233 1.208 1.963 1.208 2.196 0l.025-.129a3.836 3.836 0 0 1 3.077-3.045c1.184-.216 1.12-1.928-.071-2.107a3.789 3.789 0 0 1-3.18-3.154Zm-.944 6.887a5.34 5.34 0 0 1 2.542-2.647 5.305 5.305 0 0 1-2.628-2.548 5.262 5.262 0 0 1-2.488 2.508 5.329 5.329 0 0 1 2.574 2.687Z"}))};T.displayName="MagicIcon";var V=function(n){return m.createElement("svg",Object.assign({viewBox:"0 0 20 20"},n),m.createElement("path",{d:"M6.55 7.25a.7.7 0 0 1 .7-.7h5.5a.7.7 0 0 1 0 1.4h-5.5a.7.7 0 0 1-.7-.7Z"}),m.createElement("path",{d:"M7 9.05a.7.7 0 0 0 0 1.4h2.25a.7.7 0 1 0 0-1.4h-2.25Z"}),m.createElement("path",{fillRule:"evenodd",d:"M3.5 6.25a2.75 2.75 0 0 1 2.75-2.75h7.5a2.75 2.75 0 0 1 2.75 2.75v5.5a.75.75 0 0 1-.22.53l-4 4a.75.75 0 0 1-.53.22h-5.5a2.75 2.75 0 0 1-2.75-2.75v-7.5Zm2.75-1.25c-.69 0-1.25.56-1.25 1.25v7.5c0 .69.56 1.25 1.25 1.25h4.75v-2.25c0-.966.784-1.75 1.75-1.75h2.25v-4.75c0-.69-.56-1.25-1.25-1.25h-7.5Zm7.69 7.5h-1.19a.25.25 0 0 0-.25.25v1.19l1.44-1.44Z"}))};V.displayName="NoteIcon";function Te({current:r,steps:n}){return e.jsx(C,{paddingBlock:"400",children:e.jsx(g,{gap:"300",align:"center",children:n.map((l,i)=>{const x=i+1,p=r===x,t=r>x,d=r<x;return e.jsxs(g,{gap:"200",align:"center",blockAlign:"center",children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:p?"var(--p-color-bg-fill-brand)":t?"var(--p-color-bg-fill-success)":"var(--p-color-bg-fill-secondary)",color:p||t?"#fff":"var(--p-color-text-secondary)",fontSize:"13px",fontWeight:"600",flexShrink:0},children:t?e.jsx("svg",{viewBox:"0 0 20 20",width:"14",height:"14",fill:"currentColor",children:e.jsx("path",{d:"M8.72 13.78a.75.75 0 0 1-1.06 0l-3.22-3.22a.75.75 0 0 1 1.06-1.06l2.69 2.69 5.47-5.47a.75.75 0 0 1 1.06 1.06l-6 6Z"})}):x}),e.jsxs(C,{children:[e.jsx(s,{as:"span",variant:p?"bodyMd":"bodySm",fontWeight:p?"semibold":"regular",tone:d?"subdued":void 0,children:l.title}),l.description&&p&&e.jsx(C,{paddingBlockStart:"100",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:l.description})})]}),i<n.length-1&&e.jsx(C,{background:r>x?"bg-fill-success":"bg-fill-tertiary",width:"24px",height:"2px",borderRadius:"base"})]},i)})})})}function _({step:r,title:n,description:l,state:i,children:x,onActivate:p,disabled:t=!1}){const[d,I]=h.useState(i==="active");h.useEffect(()=>{I(i==="active")},[i]);const k=()=>{switch(i){case"active":return"bg-fill-emphasis-hover";case"complete":return"bg-fill-success-secondary";default:return}},v=i!=="inactive"&&!t,f=()=>{v&&((i==="complete"||i==="active")&&I(!d),i==="inactive"&&p&&p())};return e.jsx(R,{background:k(),padding:d?"500":"400",children:e.jsxs(u,{gap:"300",children:[e.jsx("button",{onClick:f,disabled:!v,style:{border:"none",background:"none",padding:0,cursor:v?"pointer":"default",textAlign:"left",width:"100%"},children:e.jsxs(g,{align:"space-between",blockAlign:"center",children:[e.jsxs(g,{gap:"300",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{width:"32px",height:"32px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:i==="active"?"var(--p-color-bg-fill-brand)":i==="complete"?"var(--p-color-bg-fill-success)":"var(--p-color-bg-fill-secondary)",color:i==="inactive"?"var(--p-color-text-secondary)":"#fff",fontSize:"14px",fontWeight:"600"},children:i==="complete"?e.jsx("svg",{viewBox:"0 0 20 20",width:"16",height:"16",fill:"currentColor",children:e.jsx("path",{d:"M8.72 13.78a.75.75 0 0 1-1.06 0l-3.22-3.22a.75.75 0 0 1 1.06-1.06l2.69 2.69 5.47-5.47a.75.75 0 0 1 1.06 1.06l-6 6Z"})}):r}),e.jsxs(u,{gap:"100",children:[e.jsx(s,{as:"h3",variant:i==="active"?"headingSm":"bodyMd",fontWeight:i==="active"?"semibold":"medium",tone:i==="inactive"?"subdued":void 0,children:n}),l&&e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:l})]})]}),v&&e.jsx(N,{source:d?ie:se,tone:i==="inactive"?"subdued":void 0})]})}),d&&e.jsx(C,{paddingBlockStart:"300",style:{borderTop:"1px solid var(--p-color-border-secondary)"},children:x})]})})}function O({icon:r,title:n,description:l,active:i,onClick:x,supportedFormats:p,supportedSites:t,gradient:d}){return e.jsx("button",{onClick:x,style:{border:"none",background:"none",padding:0,cursor:"pointer",width:"100%"},children:e.jsx(R,{background:i?"bg-fill-emphasis-hover":void 0,padding:"400",children:e.jsxs(u,{gap:"300",children:[e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:i?"var(--p-color-bg-fill-brand)":"var(--p-color-bg-fill-secondary)"},children:e.jsx(N,{source:r,tone:i?"textInverse":"subdued"})}),e.jsxs(u,{gap:"100",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",alignment:"start",children:n}),i&&e.jsx(U,{tone:"info",size:"small",children:"Active"})]})]}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"start",children:l}),(p||t)&&e.jsx(C,{paddingBlockStart:"200",children:e.jsxs(s,{as:"p",variant:"captionMd",tone:"subdued",alignment:"start",children:[p&&`Supports: ${p.join(", ")}`,t&&`Works with: ${t.join(", ")}`]})})]})})})}function ze({isActive:r,stages:n,insights:l=[]}){const[i,x]=h.useState(0),[p,t]=h.useState(0),[d,I]=h.useState(0);if(h.useEffect(()=>{r&&(x(0),t(0),I(0))},[r]),h.useEffect(()=>{if(!r)return;const f=n.reduce((w,D)=>w+D.duration,0);let b=0;const F=setInterval(()=>{b+=100;const w=Math.min(b/f*100,100);t(w);let D=0;for(let j=0;j<n.length;j++)if(D+=n[j].duration,b<=D){x(j);break}l.length>0&&I(Math.floor(b/2e3)%l.length),b>=f&&clearInterval(F)},100);return()=>clearInterval(F)},[r,n,l]),!r)return null;const k=n[i],v=l[d];return e.jsx(C,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsxs(u,{gap:"300",children:[e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{width:"36px",height:"36px",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",backgroundColor:"var(--p-color-bg-fill-brand)",color:"#fff"},children:e.jsxs("svg",{viewBox:"0 0 20 20",width:"20",height:"20",fill:"currentColor",children:[e.jsx("path",{d:"M5.5 4a1.5 1.5 0 1 0 0 3 1.5 1.5 0 0 0 0-3Z"}),e.jsx("path",{d:"M5 8a.75.75 0 0 1 .75.75v6.5a.75.75 0 0 1-1.5 0v-6.5A.75.75 0 0 1 5 8Z"}),e.jsx("path",{d:"M12.75 5.25a.75.75 0 0 0-1.5 0v6.5a.75.75 0 0 0 1.5 0v-6.5Z"}),e.jsx("path",{d:"M14 12.5a1.5 1.5 0 1 1-3 0 1.5 1.5 0 0 1 3 0Z"}),e.jsx("path",{d:"M9 5.75a.75.75 0 0 0-1.5 0v.688a3.75 3.75 0 0 0 0 7.124v.688a.75.75 0 0 0 1.5 0v-.688a3.75 3.75 0 0 0 0-7.124V5.75Z"})]})}),e.jsxs(u,{gap:"100",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:"AI is extracting your content..."}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",children:"This usually takes 10-15 seconds"})]})]}),e.jsx(Fe,{progress:p,size:"small"}),e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(Ae,{size:"small"}),e.jsx(s,{as:"p",variant:"bodySm",children:k?.name||"Processing..."})]}),v&&e.jsx(C,{padding:"300",background:"bg-fill-info-secondary",borderRadius:"base",borderWidth:"025",borderColor:"border-info",children:e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx(N,{source:V,tone:"info"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"info",children:v})]})}),e.jsx(u,{gap:"200",children:n.map((f,b)=>e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:b<=i?"var(--p-color-bg-fill-success)":"var(--p-color-bg-fill-tertiary)"}}),e.jsx(s,{as:"p",variant:"captionMd",tone:b<=i?void 0:"subdued",children:f.name})]},b))})]})})}function Le({products:r,selectedProduct:n,onSelect:l,placeholder:i="Search by product name, SKU, or handle...",loading:x=!1}){const[p,t]=h.useState(n?.title||""),d=r.map(f=>({value:f.id,label:f.title,media:f.featuredImage?.url?e.jsx(Q,{source:f.featuredImage.url,alt:f.featuredImage.altText||f.title,size:"small"}):void 0})),I=h.useCallback(f=>{const b=r.find(F=>F.id===f[0]);b&&(l(b),t(b.title))},[r,l]),k=h.useCallback(f=>{t(f)},[]),v=()=>e.jsx(C,{padding:"400",children:e.jsxs(u,{gap:"300",inlineAlign:"center",children:[e.jsx(N,{source:ee,tone:"subdued"}),e.jsx(s,{as:"p",variant:"bodyMd",tone:"subdued",alignment:"center",children:"No products found"}),e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"Try adjusting your search or import products first"}),e.jsx(y,{variant:"plain",size:"micro",children:"Import Products"})]})});return e.jsxs(u,{gap:"300",children:[e.jsx(X,{options:d,selected:n?[n.id]:[],onSelect:I,loading:x,emptyState:e.jsx(v,{}),listTitle:"Products",textField:e.jsx(X.TextField,{onChange:k,label:"Select a product",value:p,prefix:e.jsx(N,{source:ee}),placeholder:i,autoComplete:"off"})}),n&&e.jsx(R,{padding:"400",children:e.jsxs(g,{gap:"400",align:"space-between",blockAlign:"center",children:[e.jsxs(g,{gap:"300",align:"start",blockAlign:"center",children:[n.featuredImage?.url&&e.jsx(Q,{source:n.featuredImage.url,alt:n.title,size:"medium"}),e.jsxs(u,{gap:"200",children:[e.jsx(s,{as:"h4",variant:"bodyMd",fontWeight:"semibold",children:n.title}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["Handle: /",n.handle]}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:["ID: ",n.id.replace("gid://shopify/Product/","")]})]})]}),e.jsxs(g,{gap:"200",align:"end",blockAlign:"center",children:[e.jsx(U,{tone:"success",icon:re,children:"Selected"}),e.jsx(y,{variant:"plain",size:"micro",onClick:()=>{l(null),t("")},children:"Change"})]})]})}),!n&&r.length===0&&e.jsx(E,{tone:"info",children:e.jsxs(u,{gap:"200",children:[e.jsxs(s,{as:"p",variant:"bodySm",children:[e.jsx("strong",{children:"No products found."})," Make sure you have products in your Shopify store."]}),e.jsx(s,{as:"p",variant:"bodySm",children:"You can import products from your admin dashboard or create them manually."})]})}),p&&!x&&r.length>0&&d.length===0&&e.jsx(E,{tone:"warning",children:e.jsxs(s,{as:"p",variant:"bodySm",children:[e.jsxs("strong",{children:['No matches for "',p,'".']})," Try searching by product name, SKU, or handle."]})})]})}function Ue(){const{products:r}=Ie(),n=we();h.useRef(null);const[l,i]=h.useState(null),[x,p]=h.useState(""),[t,d]=h.useState(null),[I,k]=h.useState(!1),[v,f]=h.useState("text"),[b,F]=h.useState(""),[w,D]=h.useState(null),[j,ce]=h.useState(null),[z,J]=h.useState(1),Z=n.state==="submitting"&&(n.formData?.get("intent")==="extract"||n.formData?.get("intent")==="extract-pdf"||n.formData?.get("intent")==="extract-url"),de=n.state==="submitting"&&n.formData?.get("intent")==="save",A=n.data,W=a=>a<z?"complete":a===z?"active":"inactive",he=[{title:"Select Product",description:"Choose which product to enhance"},{title:"Import Specs",description:"Extract content with AI"},{title:"Review & Save",description:"Edit and save to metafields"}];h.useEffect(()=>{A?.extracted&&(d(A.extracted),A.source&&ce(A.source),J(3))},[A]),h.useEffect(()=>{l&&z===1&&J(2)},[l]);const ue=h.useCallback((a,o)=>{o.length>0&&D(o[0])},[]),pe=()=>{if(!w)return;const a=new FormData;a.append("intent","extract-pdf"),a.append("pdf",w),n.submit(a,{method:"post",encType:"multipart/form-data"})},ge=()=>{if(!b.trim())return;const a=new FormData;a.append("intent","extract-url"),a.append("url",b.trim()),n.submit(a,{method:"post"})},xe=(a,o)=>{if(!t)return;const c=[...t.highlights];c[a]=o,d({...t,highlights:c})},fe=a=>{t&&d({...t,highlights:t.highlights.filter((o,c)=>c!==a)})},me=()=>{t&&d({...t,highlights:[...t.highlights,""]})},G=(a,o,c)=>{if(!t)return;const S=[...t.featured];S[a]={...S[a],[o]:c},d({...t,featured:S})},ve=a=>{t&&d({...t,featured:t.featured.filter((o,c)=>c!==a)})},be=()=>{t&&d({...t,featured:[...t.featured,{title:"",value:""}]})},$=(a,o,c)=>{if(!t)return;const S=[...t.included];S[a]={...S[a],[o]:c},d({...t,included:S})},je=a=>{t&&d({...t,included:t.included.filter((o,c)=>c!==a)})},Se=()=>{t&&d({...t,included:[...t.included,{title:"",link:""}]})},K=(a,o,c,S)=>{if(!t)return;const P=[...t.specs];P[a]={...P[a],lines:P[a].lines.map((Y,ke)=>ke===o?{...Y,[c]:S}:Y)},d({...t,specs:P})},ye=(a,o)=>{if(!t)return;const c=[...t.specs];c[a]={...c[a],lines:c[a].lines.filter((S,P)=>P!==o)},d({...t,specs:c})},Ce=()=>{if(!l||!t)return;const a=new FormData;a.append("intent","save"),a.append("productId",l.id),a.append("content",JSON.stringify(t)),n.submit(a,{method:"post"})};return e.jsx(ae,{title:"Product Bridge",subtitle:"AI-powered product content automation",primaryAction:e.jsx(g,{gap:"200",children:e.jsx(U,{tone:"info",icon:T,children:"AI-Powered"})}),children:e.jsxs(u,{gap:"500",children:[e.jsx(Te,{current:z,steps:he}),A?.success&&e.jsx(E,{title:"Metafields saved successfully!",tone:"success",onDismiss:()=>{}}),A?.error&&e.jsx(E,{title:"Error",tone:"critical",children:A.error}),e.jsx(_,{step:1,title:"Select Product",description:"Choose which product to enhance with AI-extracted content",state:W(1),children:e.jsx(Le,{products:r,selectedProduct:l,onSelect:i})}),e.jsx(_,{step:2,title:"Import Product Specs",description:"Choose how to provide product information",state:W(2),disabled:!l,children:e.jsxs(u,{gap:"400",children:[e.jsxs(g,{gap:"300",children:[e.jsx(O,{icon:V,title:"Paste Text",description:"Copy specs from manufacturer websites",active:v==="text",onClick:()=>f("text")}),e.jsx(O,{icon:le,title:"Upload PDF",description:"Extract from brochures and spec sheets",active:v==="pdf",onClick:()=>f("pdf"),supportedFormats:[".pdf","up to 20MB"]}),e.jsx(O,{icon:oe,title:"Scrape URL",description:"Auto-extract from manufacturer pages",active:v==="url",onClick:()=>f("url"),supportedSites:["Canon","Sony","Nikon","+8 more"]})]}),e.jsxs(C,{paddingBlockStart:"300",children:[v==="text"&&e.jsxs(u,{gap:"400",children:[e.jsx(M,{label:"Raw specs from manufacturer",multiline:8,value:x,onChange:p,placeholder:"Paste the full specification sheet from the manufacturer website...",autoComplete:"off"}),e.jsxs(n.Form,{method:"post",children:[e.jsx("input",{type:"hidden",name:"intent",value:"extract"}),e.jsx("input",{type:"hidden",name:"text",value:x}),e.jsx(y,{variant:"primary",submit:!0,loading:Z&&n.formData?.get("intent")==="extract",disabled:!x.trim(),icon:T,children:"Extract Content with AI"})]})]}),v==="pdf"&&e.jsxs(u,{gap:"400",children:[e.jsx(te,{onDrop:ue,accept:".pdf,application/pdf",type:"file",allowMultiple:!1,children:w?e.jsxs(u,{gap:"200",inlineAlign:"center",children:[e.jsx(N,{source:De,tone:"success"}),e.jsx(s,{as:"p",variant:"bodyMd",fontWeight:"semibold",children:w.name}),e.jsxs(s,{as:"p",variant:"bodySm",tone:"subdued",children:[(w.size/1024/1024).toFixed(2)," MB"]}),e.jsx(y,{variant:"plain",onClick:()=>D(null),children:"Remove"})]}):e.jsx(te.FileUpload,{actionTitle:"Upload PDF",actionHint:"or drag and drop"})}),e.jsx(y,{variant:"primary",onClick:pe,loading:Z&&n.formData?.get("intent")==="extract-pdf",disabled:!w,icon:T,children:"Extract Content from PDF"}),e.jsx(E,{tone:"info",children:e.jsx(s,{as:"p",variant:"bodySm",children:"Upload manufacturer spec sheets or product brochures. Works best with text-based PDFs."})})]}),v==="url"&&e.jsxs(u,{gap:"400",children:[e.jsx(M,{label:"Manufacturer product page URL",value:b,onChange:F,placeholder:"https://www.usa.canon.com/shop/p/eos-r5-mark-ii",autoComplete:"off",prefix:e.jsx(N,{source:Ne})}),e.jsx(y,{variant:"primary",onClick:ge,loading:Z&&n.formData?.get("intent")==="extract-url",disabled:!b.trim(),icon:T,children:"Scrape & Extract Content"}),e.jsx(E,{tone:"info",children:e.jsx(s,{as:"p",variant:"bodySm",children:"Supported manufacturers: Canon, Sony, Nikon, Fujifilm, Panasonic, Leica, and more."})})]})]}),Z&&e.jsx(ze,{isActive:Z,stages:[{name:"Reading content",duration:2e3},{name:"AI analysis",duration:3e3},{name:"Structuring data",duration:1e3}],insights:["Analyzing content structure...","Identifying key specifications...","Organizing product highlights...","Extracting included items..."]}),j&&t&&e.jsx(E,{tone:"success",children:e.jsxs(u,{gap:"100",children:[e.jsx(s,{as:"p",variant:"bodySm",fontWeight:"semibold",children:"âœ¨ Content extracted successfully!"}),j.type==="pdf"&&e.jsxs(s,{as:"p",variant:"bodySm",children:["Source: ",j.filename," (",j.pages," pages)"]}),j.type==="url"&&e.jsxs(s,{as:"p",variant:"bodySm",children:["Source: ",j.title||j.url,j.manufacturer&&` (${j.manufacturer})`]})]})})]})}),e.jsx(_,{step:3,title:"Review & Edit Content",description:"Fine-tune the AI-extracted content before saving",state:W(3),disabled:!t,children:t&&e.jsxs(u,{gap:"500",children:[e.jsxs(g,{align:"space-between",children:[e.jsx(s,{as:"h3",variant:"headingMd",children:"Extracted Content"}),e.jsxs(g,{gap:"200",children:[e.jsx(y,{variant:"tertiary",onClick:()=>k(!0),children:"Preview JSON"}),e.jsx(y,{variant:"primary",onClick:Ce,loading:de,disabled:!l,icon:re,children:"Save to Product Metafields"})]})]}),e.jsx(R,{children:e.jsxs(u,{gap:"300",children:[e.jsxs(g,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Product Highlights (",t.highlights.length,")"]}),e.jsx(y,{variant:"plain",onClick:me,icon:H,children:"Add Highlight"})]}),t.highlights.length===0?e.jsx(C,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:'No highlights extracted. Click "Add Highlight" to create one manually.'})}):t.highlights.map((a,o)=>e.jsxs(g,{gap:"200",align:"start",blockAlign:"center",children:[e.jsx("div",{style:{flex:1},children:e.jsx(M,{label:"",labelHidden:!0,value:a,onChange:c=>xe(o,c),autoComplete:"off"})}),e.jsx(y,{variant:"plain",tone:"critical",onClick:()=>fe(o),icon:L,accessibilityLabel:"Remove highlight"})]},o))]})}),e.jsx(R,{children:e.jsxs(u,{gap:"300",children:[e.jsxs(g,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Featured Specifications (",t.featured.length,")"]}),e.jsx(y,{variant:"plain",onClick:be,icon:H,children:"Add Spec"})]}),t.featured.length===0?e.jsx(C,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No featured specs extracted. These are key specs shown prominently."})}):t.featured.map((a,o)=>e.jsxs(g,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:1},children:e.jsx(M,{label:"Specification",value:a.title,onChange:c=>G(o,"title",c),autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(M,{label:"Value",value:a.value,onChange:c=>G(o,"value",c),autoComplete:"off"})}),e.jsx(y,{variant:"plain",tone:"critical",onClick:()=>ve(o),icon:L,accessibilityLabel:"Remove featured spec"})]},o))]})}),e.jsx(R,{children:e.jsxs(u,{gap:"300",children:[e.jsxs(g,{align:"space-between",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["What's Included (",t.included.length,")"]}),e.jsx(y,{variant:"plain",onClick:Se,icon:H,children:"Add Item"})]}),t.included.length===0?e.jsx(C,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No included items found. List accessories and components included with the product."})}):t.included.map((a,o)=>e.jsxs(g,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:2},children:e.jsx(M,{label:"Item",value:a.title,onChange:c=>$(o,"title",c),autoComplete:"off"})}),e.jsx("div",{style:{flex:1},children:e.jsx(M,{label:"Link (optional)",value:a.link,onChange:c=>$(o,"link",c),autoComplete:"off",placeholder:"/products/..."})}),e.jsx(y,{variant:"plain",tone:"critical",onClick:()=>je(o),icon:L,accessibilityLabel:"Remove included item"})]},o))]})}),e.jsx(R,{children:e.jsxs(u,{gap:"400",children:[e.jsxs(s,{as:"h4",variant:"headingSm",children:["Detailed Specifications (",t.specs.length," groups)"]}),t.specs.length===0?e.jsx(C,{padding:"400",background:"bg-fill-tertiary",borderRadius:"base",children:e.jsx(s,{as:"p",variant:"bodySm",tone:"subdued",alignment:"center",children:"No specifications extracted. The detailed tech specs will appear here."})}):t.specs.map((a,o)=>e.jsx(R,{background:"bg-surface-secondary",children:e.jsxs(u,{gap:"300",children:[e.jsx(s,{as:"h5",variant:"bodyMd",fontWeight:"semibold",children:a.heading}),a.lines.map((c,S)=>e.jsxs(g,{gap:"200",align:"start",blockAlign:"end",children:[e.jsx("div",{style:{flex:1},children:e.jsx(M,{label:"Specification",labelHidden:!0,value:c.title,onChange:P=>K(o,S,"title",P),autoComplete:"off",size:"slim"})}),e.jsx("div",{style:{flex:2},children:e.jsx(M,{label:"Value",labelHidden:!0,value:c.text,onChange:P=>K(o,S,"text",P),autoComplete:"off",size:"slim"})}),e.jsx(y,{variant:"plain",tone:"critical",onClick:()=>ye(o,S),icon:L,accessibilityLabel:"Remove specification"})]},S))]})},o))]})}),!l&&e.jsx(E,{tone:"warning",children:"Please select a product in Step 1 before saving."})]})}),e.jsx(ne,{open:I,onClose:()=>k(!1),title:"JSON Preview",children:e.jsx(ne.Section,{children:e.jsx("pre",{style:{fontSize:"12px",overflow:"auto",maxHeight:"500px",background:"#f6f6f7",padding:"16px",borderRadius:"8px",border:"1px solid #e1e3e5"},children:JSON.stringify(t,null,2)})})})]})})}function Ve(){const r=Pe(),n=()=>r&&typeof r=="object"&&"message"in r&&"suggestion"in r?r:{message:"Something went wrong.",suggestion:"Try refreshing the page or re-opening the app."},{message:l,suggestion:i}=n();return e.jsx(ae,{title:"Product Bridge",children:e.jsx(E,{tone:"critical",title:l,children:i})})}export{Ve as ErrorBoundary,Ue as default};
